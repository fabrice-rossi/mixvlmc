<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function 'draws' a context tree as a text."><title>Text based representation of a covlmc model — draw.covlmc • mixvlmc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Text based representation of a covlmc model — draw.covlmc"><meta property="og:description" content="This function 'draws' a context tree as a text."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mixvlmc</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Getting started</h6>
    <a class="dropdown-item" href="../articles/context-trees.html">Context trees</a>
    <a class="dropdown-item" href="../articles/variable-length-markov-chains.html">Variable length Markov chains (VLMC)</a>
    <a class="dropdown-item" href="../articles/covlmc.html">Variable Length Markov Chains with Covariates (COVLMC)</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced topics</h6>
    <a class="dropdown-item" href="../articles/likelihood.html">Likelihood calculation</a>
    <a class="dropdown-item" href="../articles/prediction.html">Predicting with (CO)VLMC</a>
    <a class="dropdown-item" href="../articles/sampling.html">Sampling from (CO)VLMC</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://fabrice-rossi.github.io/blog/posts/mixvlmc-0-2.html">mixvlmc 0.2.0</a>
    <a class="external-link dropdown-item" href="https://fabrice-rossi.github.io/blog/posts/mixvlmc-0-1.html">mixvlmc 0.1.1</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/fabrice-rossi/mixvlmc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Text based representation of a covlmc model</h1>
      <small class="dont-index">Source: <a href="https://github.com/fabrice-rossi/mixvlmc/blob/HEAD/R/covlmc_draw.R" class="external-link"><code>R/covlmc_draw.R</code></a></small>
      <div class="d-none name"><code>draw.covlmc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function 'draws' a context tree as a text.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for covlmc</span></span>
<span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span></span>
<span>  <span class="va">ct</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="draw_control.html">draw_control</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"coef"</span>, <span class="st">"full"</span><span class="op">)</span>,</span>
<span>  p_value <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  with_state <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  constant_as_prob <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>ct</dt>
<dd><p>a fitted covlmc model.</p></dd>


<dt>control</dt>
<dd><p>a list of low level control parameters of the text
representation. See details and <code><a href="draw_control.html">draw_control()</a></code>.</p></dd>


<dt>model</dt>
<dd><p>this parameter controls the display of logistic models
associated to nodes. The default <code>model="coef"</code> represents the coefficients
of the logistic models associated to each context. <code>model="full"</code> includes
the name of the variables in the representation (see details). Setting
<code>model=NULL</code> removes the model representations. Additional parameters can
be used to tweak model representations (see details).</p></dd>


<dt>p_value</dt>
<dd><p>specifies whether the p-values of the likelihood ratio tests
conducted during the covlmc construction must be included in the
representation (defaults to <code>FALSE</code>).</p></dd>


<dt>digits</dt>
<dd><p>numerical parameters and p-values are represented using the
base::signif function, using the number of significant digits specified
with this parameter.</p></dd>


<dt>with_state</dt>
<dd><p>specifies whether to display the state associated to each
dimension of the logistic model (see details).</p></dd>


<dt>constant_as_prob</dt>
<dd><p>specifies whether to represent logistic models that
do not use covariates (a.k.a. constant models) using the probability
distributions they induced on the state space (default behaviour with
<code>constant_as_prob=TRUE</code>) or as normal models (when set to <code>FALSE</code>). This
is not taken into account when <code>model</code> is not set to <code>"coef"</code>.</p></dd>


<dt>...</dt>
<dd><p>additional arguments for draw.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>the context tree (invisibly).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function uses basic "ascii art" to represent the context tree. Characters
used to represent the structure of the tree, e.g. branches, can be modified
using <code><a href="draw_control.html">draw_control()</a></code>.</p>
<p>In addition to the structure of the context tree, <code>draw</code> can represent
information attached to the node (contexts and partial contexts). This is
controlled by additional parameters depending on the type of the context
tree (as well as by the <code>control</code> parameter).</p>
    </div>
    <div class="section level2">
    <h2 id="specific-parameters-in-control">Specific parameters in <code>control</code><a class="anchor" aria-label="anchor" href="#specific-parameters-in-control"></a></h2>
    


<p>Model representations are affected by the following additional
fields of <code>control</code> that are specific to <code><a href="covlmc.html">covlmc()</a></code>:</p><ul><li><p><code>intercept_sep</code>: character(s) used to separate the intercept from
the other coefficients in model representation.</p></li>
<li><p><code>time_sep</code>: character(s) used to split the coefficients list by blocks
associated to time delays in the covariate inclusion into the logistic
model. The first block contains the intercept(s), the second block the
covariate values a time t-1, the third block at time t-2, etc.</p></li>
<li><p><code>level_sep</code>: character(s) used separate levels from model, see below.</p></li>
<li><p><code>open_p_value</code> and <code>close_p_value</code>: delimiters used around the p-values
when <code>p_value=TRUE</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="variable-representation">Variable representation<a class="anchor" aria-label="anchor" href="#variable-representation"></a></h2>
    


<p>When <code>model="full"</code>, the representation includes the names of the variables
used by the logistic models. Names are the one generated by the underlying
logistic model, e.g. <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code>. Numerical variable names are used as
is, while factors have levels appended. The intercept is denoted <code>(I)</code> to
save space. The time delays are represented by an underscore followed by
the time delay. For instance if the model uses the numerical covariate <code>y</code>
with two delays, it will appear with two variables <code>y_1</code> and <code>y_2</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="state-representation">State representation<a class="anchor" aria-label="anchor" href="#state-representation"></a></h2>
    


<p>When <code>model</code> is not <code>NULL</code>, the coefficients of the logistic models are
presented, organized in rows associated to states. One state is used as the
reference state and the logistic model aims at predicting the ratio of
probability between another state and the reference one (in log scale).
When <code>with_state</code> is <code>TRUE</code>, the display includes for each row of
coefficients the target state. This is useful when using e.g. <code><a href="https://rdrr.io/pkg/VGAM/man/vglm.html" class="external-link">VGAM::vglm</a></code>
as unused levels of the target variable will be automatically dropped from
the model, leading to a reduce number of rows. The reference state is
either shown on the first row if <code>model</code> is <code>"full"</code> or after the state on
each row if <code>model</code> is <code>"coef"</code>. States are separated from the model
representation by the character(s) specified in <code>level_sep</code> in the <code>control</code>
list (see <code><a href="draw_control.html">draw_control()</a></code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">pc</span> <span class="op">&lt;-</span> <span class="va">powerconsumption</span><span class="op">[</span><span class="va">powerconsumption</span><span class="op">$</span><span class="va">week</span> <span class="op">==</span> <span class="fl">5</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">pc</span><span class="op">$</span><span class="va">active_power</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">pc</span><span class="op">$</span><span class="va">active_power</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dts_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>day_night <span class="op">=</span> <span class="op">(</span><span class="va">pc</span><span class="op">$</span><span class="va">hour</span> <span class="op">&gt;=</span> <span class="fl">7</span> <span class="op">&amp;</span> <span class="va">pc</span><span class="op">$</span><span class="va">hour</span> <span class="op">&lt;=</span> <span class="fl">17</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="covlmc.html">covlmc</a></span><span class="op">(</span><span class="va">dts</span>, <span class="va">dts_cov</span>, min_size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span><span class="va">m_cov</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   +-- (0,1.34] ([ -2.81 &amp; 2.18 | -4.45 | 2.42 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   '-- (1.34,7.54] ([ -19.6 &amp; 18.4 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   '-- (1.34,7.54] (0.135, 0.865)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> '-- (1.34,7.54] (0.927, 0.0734)</span>
<span class="r-in"><span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span><span class="va">m_cov</span>, model <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   '-- (1.34,7.54]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   '-- (1.34,7.54]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> '-- (1.34,7.54]</span>
<span class="r-in"><span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span><span class="va">m_cov</span>, p_value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   +-- (0,1.34] (&lt;0.02329&gt; [ -2.813 &amp; 2.178 | -4.449 | 2.418 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   '-- (1.34,7.54] (&lt;0.01834&gt; [ -19.57 &amp; 18.39 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   '-- (1.34,7.54] (&lt;0.6763&gt; 0.1351, 0.8649)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> '-- (1.34,7.54] (&lt;0.8175&gt; 0.9266, 0.07341)</span>
<span class="r-in"><span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span><span class="va">m_cov</span>, p_value <span class="op">=</span> <span class="cn">FALSE</span>, control <span class="op">=</span> <span class="fu"><a href="draw_control.html">draw_control</a></span><span class="op">(</span>time_sep <span class="op">=</span> <span class="st">" ^ "</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   +-- (0,1.34] ([ -2.813 &amp; 2.178 ^ -4.449 ^ 2.418 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   '-- (1.34,7.54] ([ -19.57 &amp; 18.39 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   '-- (1.34,7.54] (0.1351, 0.8649)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> '-- (1.34,7.54] (0.9266, 0.07341)</span>
<span class="r-in"><span><span class="fu"><a href="draw.html">draw</a></span><span class="op">(</span><span class="va">m_cov</span>, model <span class="op">=</span> <span class="st">"full"</span>, control <span class="op">=</span> <span class="fu"><a href="draw_control.html">draw_control</a></span><span class="op">(</span>time_sep <span class="op">=</span> <span class="st">" ^ "</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   +-- (0,1.34]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   +-- (0,1.34] ([ (I)    &amp; day_night_1TRUE ^ day_night_2TRUE ^ day_night_3TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   |               -2.813 &amp; 2.178           ^ -4.449          ^ 2.418           ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |   '-- (1.34,7.54] ([ (I)    &amp; day_night_1TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |                      -19.57 &amp; 18.39           ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   '-- (1.34,7.54] ([ (I)   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |                      -1.856 ])</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> '-- (1.34,7.54] ([ (I)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    2.535 ])</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://fabrice-rossi.github.io/" class="external-link">Fabrice Rossi</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

